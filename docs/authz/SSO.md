---
layout: default
title: SSO
parent: Authentication And Authorization
nav_order: 3
---
SSO기본적으로 한번 인증으로 여러 서비스를 이용하는 것을 의미하며 구현 방식은 다양하다.

이 페이지는 구현방식보다는 서비스 구축시에 SSO가 필요하게 되는 시나리오를 정리하는 데 중점을 둔다.

구현에 대한 내용은 "AuthServer" 디렉토리를 참조할 것.

# SAML
SAML 에 대한 이용 시나리오나, 이론적인 내용을 정리한다.

SAML인증 서버 구현에 대한 내용은 "AuthServer" 디렉토리를 참조할 것.

### SAML 이용시의 라이브러리

* Spring Security SAML
  + https://spring.io/projects/spring-security-saml/
  + 쉽게 SAML IDP(Identity Provider)를 사용할 수 있도록 해준다
  + 하지만, 인증서버 개발용은 아닌 듯하다.

### Spring Authorization Server
SAML에 대해서는 아직 구현이 안되있는 듯하다.

 * 관련 이슈
   + https://github.com/spring-projects/spring-authorization-server/issues/1270


# SSO가 필요한 시나리오

### SSO가 필요한 이유 - 1
같은 회사에서 A 서비스 앱, B 서비스 앱를 런칭했다.
B 서비스는 A서비스와 동일한 회원정보를 가지고 인증 처리를 하려고 했다. 임원급 판단은 B 서비스는 A 서비스의 회원 정보로 인증하도록 하기를 원했기 때문에, B 서비스 개발자는 A서비스의 회원아이디, 비밀번호를 이용해서 로그인하도록 하였다. A 서비스는 HTTP 세션으로 인증정보를 관리하는 방식이 아니고, JWT토큰으로 accessToken과 refreshToken을 관리하도록 했기 때문에, B 서비스는 A서비스와 동일한 JWT토큰으로 인증되도록 되었다.

처음에 B 서비스 개발자는 A 서비스와 동일한 로직으로 인증이 처리되는 것이 편리하게 느껴졌다. JWT토큰에 대한 검증처리와 신규 JWT토큰의 발급처리는 A 서비스의 개발된 소스를 submodule로 이용하면 되었기 때문에, 소스 수정은 매우 빠르게 되었다.

하지만, B 서비스 개발자는 곧 다른 문제소지가 될 수 있는 것을 알게 되었다(정확히 아직 문제는 아니지만, 문제가 될 수 있는...). 발급된 JWT 토큰을 A서비스를 호출하는 데 사용할 수 있는 것이다. B 서비스의 앱에서는 B 서비스용 API만 호출하면 되고, 보안상 호출해야 되는 URL에 대해서만 호출하도록 하는 것이 보안상 유리하기 때문에, A 서비스에 대해서는 호출시 에러가 발생하도록 해야되지 않을까?

동일한 인증정보(ID, Password)를 통해서 인증할 수 있지만, 사용하는 서비스에 따라서 호출해야 되는 서비스 API 만 호출 하도록 해야할 것이다.

그래서 SSO 서비스에 대해서 웹에서 더 검색해보니, "권한제어"라는 항목이 있었다.
> SSO는 사용자 액세스 관리의 한 측면일 뿐입니다. SSO는 조직의 내부 시스템 내에서 사용자 행동을 추적하고 제어하기 위한 액세스 제어, 권한 제어, 활동 로그, 기타 조치와 결합되어야 합니다.


---
